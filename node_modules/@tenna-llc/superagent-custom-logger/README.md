# superagent-custom-logger
A superagent plugin that supports logging of route status and http timings.

![Test](https://github.com/tenna-llc/superagent-custom-logger/workflows/Test/badge.svg)
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->


- [Installation](#installation)
- [Usage](#usage)
- [Prerequisites](#prerequisites)
- [Dependencies](#dependencies)
  - [GitHub SSH Key Authorization](#github-ssh-key-authorization)
  - [Installing Dependencies](#installing-dependencies)
- [Testing](#testing)
  - [Running the test suite](#running-the-test-suite)
  - [Linting](#linting)
- [Documentation](#documentation)
  - [Updating TOC for Documentation](#updating-toc-for-documentation)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

# Installation
```
➜  test npm login --registry=https://npm.pkg.github.com
Username: <your github username>
Password: <your github api token>
Email: (this IS public) <your email>
Logged in as <your github username> on https://npm.pkg.github.com/.
➜  npm i @tenna-llc/superagent-custom-logger
```

# Usage

```
const SuperAgent = require('superagent');
const SuperAgentCustomLogger = require('@tenna-llc/superagent-custom-logger);
const Logger = require('pino')();

const request = SuperAgent.agent().use(SuperAgentCustomLogger(Logger));

await request.get('google.com');

// { statusCode: 200, method: 'GET', url: 'google.com' }
```

# Prerequisites

* `nodejs@v12.x`

# Dependencies

## GitHub SSH Key Authorization
Some node modules are installed directory from Github.com.  We use the `git+ssh` protocol for pulling in these packages.  Make sure you have SSH authentication setup and the dependent repos are correctly authorized for you.

## Installing Dependencies
Install dependencies declared from [`package.json`](package.json).

```
npm i
```

# Testing

## Running the test suite
Install dependencies and run the test.

```bash
npm test
```

## Linting
Using [`eslint`](https://eslint.org/) to code cop.

```bash
npm run lint
```

# Documentation

## Updating TOC for Documentation
Run [`doctoc`](https://github.com/thlorenz/doctoc)

```bash
npm run doctoc
```


