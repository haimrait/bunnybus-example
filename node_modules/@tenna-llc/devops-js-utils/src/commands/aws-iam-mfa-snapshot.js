#!/usr/bin/env node
'use strict';

const AWS = require('aws-sdk');
const TennaAWSIAMWrapper = require('../modules/TennaAWSIAMWrapper');

(async () => {
    const IAM = new AWS.IAM();
    const tennaIAM = new TennaAWSIAMWrapper({ IAM });
    const users = await tennaIAM.getFullUserList();
    for (const user of users) {
        const status = await tennaIAM.getUserMFAStatus({ user });
        const userName = `UserName: ${user.UserName}`.padEnd(50);
        const mfaStatus = `EnabledMFA: ${status}`;
        console.log(`${userName}| ${mfaStatus}`);
    }
})();
