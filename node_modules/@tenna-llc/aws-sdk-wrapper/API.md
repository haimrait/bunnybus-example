# `aws-sdk-wrapper`

<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->


- [Cognito](#cognito)
  - [`new Cognito(params)`](#new-cognitoparams)
    - [Methods](#methods)
      - [`createUser({ email, phone, userId, accountId })`](#createuser-email-phone-userid-accountid-)
      - [`deleteUser({ username: Username })`](#deleteuser-username-username-)
      - [`setUserStatus({ username: Username, enabled = true })`](#setuserstatus-username-username-enabled--true-)
      - [`updateUserAttributes({ username: Username, email, phone })`](#updateuserattributes-username-username-email-phone-)
      - [`getUser({ username: Username })`](#getuser-username-username-)
      - [`getTokensForUser({ userPoolId, clientId, clientSecret, userName, password })`](#gettokensforuser-userpoolid-clientid-clientsecret-username-password-)
- [DynamoDB](#dynamodb)
  - [`new DynamoDB(params)`](#new-dynamodbparams)
    - [Static Methods](#static-methods)
      - [`Singleton([params])`](#singletonparams)
    - [Getters and Setters](#getters-and-setters)
      - [`params`](#params)
    - [Methods](#methods-1)
      - [`createTable(tableSchema)`](#createtabletableschema)
      - [`deleteTable(tableName)`](#deletetabletablename)
      - [`listTables()`](#listtables)
      - [`hasTable(tableName)`](#hastabletablename)
      - [`putItem(tableName, item, [params])`](#putitemtablename-item-params)
      - [`getItemByKey(tableName, keyValue, [params])`](#getitembykeytablename-keyvalue-params)
      - [`deleteItemByKey(tableName, keyValue, [params])`](#deleteitembykeytablename-keyvalue-params)
      - [`deleteAllRangeItemsByHash(tableName, hashName, rangeName, hashValue, [queryParams, [batchParams]])`](#deleteallrangeitemsbyhashtablename-hashname-rangename-hashvalue-queryparams-batchparams)
      - [`queryCountWithHashKey(tableName, keyValue, [params])`](#querycountwithhashkeytablename-keyvalue-params)
      - [`queryWithHashKey(tableName, keyValue, [params])`](#querywithhashkeytablename-keyvalue-params)
      - [`queryWithHashKeyIterable(tableName, keyValue, [params])`](#querywithhashkeyiterabletablename-keyvalue-params)
      - [`queryIndexWithHashKeyIterable(tableName, keyValue, [params])`](#queryindexwithhashkeyiterabletablename-keyvalue-params)
      - [`queryWithHashKeyWithinRange(tableName, keyValue, rangeKey, startOfRange, endOfRange, [params])`](#querywithhashkeywithinrangetablename-keyvalue-rangekey-startofrange-endofrange-params)
      - [`queryWithHashKeyWithinRangeIterable(tableName, keyValue, rangeKey, startOfRange, endOfRange, [params])`](#querywithhashkeywithinrangeiterabletablename-keyvalue-rangekey-startofrange-endofrange-params)
- [S3](#s3)
  - [`new S3(params)`](#new-s3params)
    - [Static Methods](#static-methods-1)
      - [`Singleton([params])`](#singletonparams-1)
    - [Getters and Setters](#getters-and-setters-1)
      - [`params`](#params-1)
    - [Methods](#methods-2)
      - [`createBucket(bucketName)`](#createbucketbucketname)
      - [`deleteBucket(bucketName)`](#deletebucketbucketname)
      - [`bucketExists(bucketName)`](#bucketexistsbucketname)
      - [`listBucket(bucketName)`](#listbucketbucketname)
      - [`put(bucketName, key, acl, jsonContent)`](#putbucketname-key-acl-jsoncontent)
      - [`upload(bucketName, key, acl, body)`](#uploadbucketname-key-acl-body)
      - [`get(bucketName, key)`](#getbucketname-key)
      - [`getStream(bucketName, key)`](#getstreambucketname-key)
      - [`del(bucketName, key)`](#delbucketname-key)
      - [`check(bucketName, key)`](#checkbucketname-key)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

## Cognito

### `new Cognito(params)`
Creates a new instance of `cognito`.  Accepts Cognito configuration parameters.  See [`params`](https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/CognitoIdentityServiceProvider.html#constructor-property) for allowed options.

```javascript
const { Cognito } = require('aws-sdk-wrapper');
const cognito = new Cognito({
    region: 'us-east-1',
    endpoint: 'http://localhost:8000',
    credentials: {
        accessKeyId: '...',
        secretAccessKey: '...'
    }
});
```

#### Methods

##### `createUser({ email, phone, userId, accountId })`
Create a user in the Cognito user pool.

* `email` - email address of the user **Required** (when sign in is email)
* `phone` - phone of the user **Required** (when sign in is phone)
* `userId` - Tenna user id value **Required**
* `accountId` - Tenna account id value **Required**
* `userType` - Tenna user type **Optional**
* `invite` - if set to `SUPPRESS` won't send invite, `RESEND` will resend invite **Optional**, Defaults to send invite

##### `deleteUser({ username })`
Delete a user from the Cognito user pool.

* `username` - either the user's email or phone identifier **Required**

##### `setUserStatus({ username, enabled = true })`
Updates the user's active state in the Cognito user pool.

* `username` - either the user's email or phone identifier **Required**
* `enabled` - `true` / `false` value for the state of the user account.  Defaults to `true` **Optional**

##### `updateUserAttributes({ username, email, phone, userType })`
Updates the user's attributes in the Cognito user pool.

* `username` - either the user's email or phone identifier **Required**
* `email` - email address of the user **Required** (when sign in is email)
* `phone` - phone of the user **Required** (when sign in is phone)
* `userType` - Tenna user type **Optional**

##### `deleteUserAttributes({ username, attributeNames })`
Deletes the user's attributes in the Cognito user pool.

* `username` - either the user's email or phone identifier **Required**
* `attributeNames` - array of attribute names to delete **Required**

##### `getUser({ username })`
Retrieves a user from the Cognito user pool.

* `username` - either the user's email or phone identifier **Required**

##### `getTokensForUser({ userPoolId, clientId, clientSecret, userName, password })`
Retrieves a set of OAuth tokens for a user's credentials.  This relies on a supporting App Client configuration that allows for NO_SRP_ADMIN_USER_PASSWORD_AUTH.

* `clientId` - the id for the App Client configured with the Cognito user pool **Required**
* `clientSecret` - the secret generated for the App Client.  Not all App Client has a secret.  **Optional**
* `username` - either the user's email or phone identifier **Required**
* `password` - password for the user account **Required**

##### `setUserPassword({ username, password, permanent })`
Set the user password either temporary or permanent.

* `username` - either the user's email or phone identifier **Required**
* `password` - must comply with Cognito's password rules **Required**
* `permanent` - Set as permanent password, defaults to true **Optional**

##### `sendInvite({ username})`
Updates set the user password either temporary or permanent.

* `username` - either the user's email or phone identifier **Required**

## DynamoDB

### `new DynamoDB(params)`
Creates a new instance of `dynamoDB`.  Accepts AWS DynamoDB configuration parameters.  See [`params`](https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB.html#constructor-property) for allowed options.

```javascript
const { DynamoDB } = require('aws-sdk-wrapper');
const dynamoDB = new DynamoDB({
    region: 'us-east-1',
    endpoint: 'http://localhost:8000'
    credentials: {
        accessKeyId: '...',
        secretAccessKey: '...'
    }
});
```

#### Static Methods

##### `Singleton([params])`
Sets up new, or retrieves an existing singleton instance of DynamoDB. Accepts a configuration parameter. See [`params`](https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB.html#constructor-property) for allowed options.

```javascript
const { DynamoDB } = require('aws-sdk-wrapper');
const dynamoDB = DynamoDB.Singleton({
    region: 'us-east-1',
    endpoint: 'http://localhost:8000'
    credentials: {
        accessKeyId: '...',
        secretAccessKey: '...'
    }
});

//do work;
```

#### Getters and Setters

##### `params`
Configuration for the DynamoDB client.  Refer to [`params`](https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB.html#constructor-property) for allowed options.

#### Methods

##### `createTable(tableSchema)`
Creates a DynamoDB table when one does not exist

* `tableSchema` - schema definition for a DynamoDB table.  Refer to [`createTable`](https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB.html#createTable-property) for allowed options **Required**

##### `deleteTable(tableName)`
Deletes a DynamoDB table when one exist

* `tableName` - name of table **Required**

##### `listTables()`
List all available tables from DynamoDB

##### `hasTable(tableName)`
Returns `true/false` for the table queried

* `tableName` - name of table **Required**

##### `putItem(tableName, item, [params])`
Puts an item into a DynamoDB table.

* `tableName` - name of a DynamoDB table **Required**
* `item` - a Javascript object to store.  The object needs to be a simple object consisting of primitives with allowance for arrays and non complex objects.  Objects such as `Set` and `Map` is not serializable into DynamoDB. **Required**
* `params` -  additional parameterization.  Refer to [`putItem`](https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB.html#putItem-property) for allowed options **Optional**

##### `getItemByKey(tableName, keyValue, [params])`
Retrieve an item by key and value from a DynamoDB table.

* `tableName` - name of a DynamoDB table **Required**
* `keyValue` - A K/V Javascript object used to identify the item with.  eg: `{ keyName: 'value' }`. **Required**
* `params` - additional parameterization. Refer to [`getItem`](https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB.html#getItem-property) for allowed options **Optional**

##### `deleteItemByKey(tableName, keyValue, [params])`
Delete an item by key and value from a DynamoDB table.

* `tableName` - name of a DynamoDB table **Required**
* `keyValue` - A K/V Javascript object used to identify the item with.  eg: `{ keyName: 'value' }`. **Required**
* `params` - additional parameterization. Refer to [`deleteItem`](https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB.html#deleteItem-property) for allowed options **Optional**

##### `deleteAllRangeItemsByHash(tableName, hashName, rangeName, hashValue, [queryParams, [batchParams]])`
Delete any range of items that match the hash key value from a DynamoDB table.

* `tableName` - name of a DynamoDB table **Required**
* `hashName` - name of the hash property **Required**
* `rangeName` - name of the range property **Required**
* `hashValue` - value to the corresponding hash propery to match against **Required**
* `queryParams` - additional parameterization. Refer to [`query`](https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB.html#query-property for allowed options **Optional**
* `batchParams` - additional parameterization. Refer to [`batchWriteItem`](https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB.html#batchWriteItem-property) for allowed options **Optional**

##### `queryCountWithHashKey(tableName, keyValue, [params])`
Get count of items with matching hash key.  Pagination is automatically handled.

* `tableName` - name of a DynamoDB table **Required**
* `keyValue` - A K/V Javascript object used to identify the item with.  eg: `{ keyName: 'value' }`. **Required**
* `params` - additional parameterization. Refer to [`query`](https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB.html#query-property) for allowed options **Optional**

##### `queryWithHashKey(tableName, keyValue, [params])`
Queries all items with matching hash key.  Pagination is automatically handled.

* `tableName` - name of a DynamoDB table **Required**
* `keyValue` - A K/V Javascript object used to identify the item with.  eg: `{ keyName: 'value' }`. **Required**
* `params` - additional parameterization. Refer to [`query`](https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB.html#query-property) for allowed options **Optional**

##### `queryWithHashKeyIterable(tableName, keyValue, [params])`
Queries all items with matching hash key.  Pagination is automatically handled.  This interface returns a generator that can be used with `for await..`

* `tableName` - name of a DynamoDB table **Required**
* `keyValue` - A K/V Javascript object used to identify the item with.  eg: `{ keyName: 'value' }`. **Required**
* `params` - additional parameterization. Refer to [`query`](https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB.html#query-property) for allowed options **Optional**

##### `queryIndexWithHashKeyIterable(tableName, keyValue, [params])`
Queries all items with matching hash key.  Pagination is automatically handled.  This interface returns a generator that can be used with `for await..`

* `tableName` - name of a DynamoDB table **Required**
* `indexName` - name of a DynamoDB index **Required**
* `keyValue` - A K/V Javascript object used to identify the item with.  eg: `{ keyName: 'value' }`. **Required**
* `params` - additional parameterization. Refer to [`query`](https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB.html#query-property) for allowed options **Optional**

##### `queryWithHashKeyWithinRange(tableName, keyValue, rangeKey, startOfRange, endOfRange, [params])`
Queries all items with matching hash key.  Pagination is automatically handled.

* `tableName` - name of a DynamoDB table **Required**
* `keyValue` - A K/V Javascript object used to identify the item with.  eg: `{ keyName: 'value' }`. **Required**
* `rangeKey` - the range key name. **Required**
* `startOfRange` - the starting value for the range key lookup. **Required**
* `endOfRange` - the ending value for the range key lookup. **Required**
* `params` - additional parameterization. Refer to [`query`](https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB.html#query-property) for allowed options **Optional**

##### `queryWithHashKeyWithinRangeIterable(tableName, keyValue, rangeKey, startOfRange, endOfRange, [params])`
Queries all items with matching hash key.  Pagination is automatically handled.  This interface returns a generator that can be used with `for await..`

* `tableName` - name of a DynamoDB table **Required**
* `keyValue` - A K/V Javascript object used to identify the item with.  eg: `{ keyName: 'value' }`. **Required**
* `rangeKey` - the range key name. **Required**
* `startOfRange` - the starting value for the range key lookup. **Required**
* `endOfRange` - the ending value for the range key lookup. **Required**
* `params` - additional parameterization. Refer to [`query`](https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/DynamoDB.html#query-property) for allowed options **Optional**

## S3

### `new S3(params)`
Creates a new instance of `S3`.  Accepts AWS S3 configuration parameters.  See [`params`](https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/S3.html#constructor-property) for allowed options.

```javascript
const { S3 } = require('aws-sdk-wrapper');
const s3 = new S3({
    endpoint: 'http://localhost:4566'
    credentials: {
        accessKeyId: '...',
        secretAccessKey: '...'
    }
});
```

#### Static Methods

##### `Singleton([params])`
Sets up new, or retrieves an existing singleton instance of DynamoDB. Accepts a configuration parameter. See [`params`](https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/S3.html#constructor-property) for allowed options.

```javascript
const { S3 } = require('aws-sdk-wrapper');
const s3 = S3.Singleton({
    region: 'us-east-1',
    endpoint: 'http://localhost:8000'
    credentials: {
        accessKeyId: '...',
        secretAccessKey: '...'
    }
});

//do work;
```

#### Getters and Setters

##### `params`
Configuration for the S3 client.  Refer to [`params`](https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/S3.html#constructor-property) for allowed options.

#### Methods

##### `createBucket(bucketName)`
Creates a S3 bucket when one does not exist

* `bucketName` - Name of the Bucket.  Refer to [`createBucket`](https://docs.aws.amazon.com/AWSJavaScriptSDK/latest/AWS/S3.html#createBucket-property) for allowed options **Required**

##### `deleteBucket(bucketName)`
Deletes a S3 Bucket when one exist

* `bucketName` - name of bucket **Required**


##### `bucketExists(bucketName)`
Returns `true/false` for the bucketName queried

* `bucketName` - name of Bucket **Required**

##### `listBucket(bucketName)`
Returns `array` of the objects stored inside the bucket identified by the bucketName

* `bucketName` - name of Bucket **Required**

##### `put(bucketName, key, acl, jsonContent)`
Puts the jsonContent identified by the key into a S3 bucket.

* `bucketName` - name of a S3 bucket name **Required**
* `key` - a string to identify the object filename **Required**
* `acl` - Access control rights for the file. Refer to [`ACL for PubObject`](https://docs.aws.amazon.com/AmazonS3/latest/API/API_PutObjectAcl.html) **Required**
* `jsonContent` -  The content to be stored into the file as a Json object.  **Required**

##### `upload(bucketName, key, acl, body)`
Puts the jsonContent identified by the key into a S3 bucket.

* `bucketName` - name of a S3 bucket name **Required**
* `key` - a string to identify the object filename **Required**
* `acl` - Access control rights for the file. Refer to [`ACL for PubObject`](https://docs.aws.amazon.com/AmazonS3/latest/API/API_PutObjectAcl.html) **Required**
* `body` -  Any type of Buffer, Typed Array, Blob, String or ReadableStream.  **Required**

##### `get(bucketName, key)`
Retrieve an object by key from the S3 Bucket.

* `bucketName` - name of a S3 Bucket **Required**
* `key` - A Key to identify the object. **Required**

##### `getStream(bucketName, key)`
Retrieve a readable stream representing the object by key from the S3 Bucket.

* `bucketName` - name of a S3 Bucket **Required**
* `key` - A Key to identify the object. **Required**

##### `del(bucketName, key)`
Delete an object by key from the S3 Bucket.

* `bucketName` - name of a S3 Bucket **Required**
* `key` - A Key to identify the object. **Required**

##### `check(bucketName, key)`
Check for an object by key in the S3 Bucket and return true if the file exists else false.

* `bucketName` - name of a S3 Bucket **Required**
* `key` - A Key to identify the object. **Required**

