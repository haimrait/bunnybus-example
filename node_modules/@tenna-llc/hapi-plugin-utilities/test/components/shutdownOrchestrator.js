'use strict';

const Lab = require('@hapi/lab');
const Code = require('@hapi/code');
const ShutdownOrchestrator = require('../../src/components/shutdownOrchestrator');

const { before, after, beforeEach, afterEach, describe, it } = (exports.lab = Lab.script());
const expect = Code.expect;

let shutdownOrchestrator = null;

describe('Components', () => {
    describe('ShutdownOrchestrator', () => {
        beforeEach(async () => {
            shutdownOrchestrator = new ShutdownOrchestrator({
                server: {},
                process: {}
            });
        });

        describe('getter/setter', () => {
            describe('runMode', () => {
                it('should not set when value is not enuemrated', () => {
                    const func = () => {
                        shutdownOrchestrator.runMode = 'badValue';
                    };

                    expect(func).to.throw(Error, 'badValue is not a recognized RUN_MODE');
                });
            });
        });
    });
});
